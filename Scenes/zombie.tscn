[gd_scene load_steps=28 format=3 uid="uid://dn41xgsutrc0u"]

[ext_resource type="PackedScene" uid="uid://2xeql213rw21" path="res://Models/Zombie/characterMedium.fbx" id="1_5ia6i"]
[ext_resource type="Script" uid="uid://cc6hl4kav2jau" path="res://Codebase/Zombie/zombie.gd" id="1_j0wq0"]
[ext_resource type="Material" uid="uid://caiybsnkovkg8" path="res://Models/Characters/Skins/zombie_male.tres" id="2_fj6an"]
[ext_resource type="Animation" uid="uid://bsy72jsmowaoh" path="res://Models/Zombie/run.res" id="2_xx3wb"]
[ext_resource type="Script" uid="uid://xgwgkqd85pbh" path="res://Codebase/Zombie/point_to_zombie.gd" id="3_hslf5"]
[ext_resource type="Animation" uid="uid://cmc6xgrhpp4bf" path="res://Models/Zombie/attack.res" id="3_j0wq0"]
[ext_resource type="Material" uid="uid://ct74tkuk0gvam" path="res://Models/Characters/Skins/zombie_female.tres" id="3_tmcj1"]
[ext_resource type="AudioStream" uid="uid://ce6jptq7yl27h" path="res://Audio/SFX/zombie/zombie_hit.wav" id="4_aw8xw"]
[ext_resource type="Animation" uid="uid://3aneyudo7y2o" path="res://Models/Zombie/death.res" id="4_hslf5"]
[ext_resource type="AudioStream" uid="uid://bo0nnys7nqhi5" path="res://Audio/SFX/zombie/zombie_death.mp3" id="5_j0eft"]
[ext_resource type="Animation" uid="uid://hjloiso4om0u" path="res://Models/Zombie/hurt.res" id="5_u2tw5"]
[ext_resource type="Animation" uid="uid://cr5vv0yuqmmjl" path="res://Models/Zombie/idle.res" id="6_fj6an"]
[ext_resource type="Resource" uid="uid://c7k8rtahyr8h7" path="res://Data/items/item_spawns.tres" id="6_j0eft"]
[ext_resource type="AudioStream" uid="uid://muucky2a5xtk" path="res://Audio/SFX/zombie/zombie_foot_L.wav" id="6_jrf8t"]
[ext_resource type="AudioStream" uid="uid://de3betwpjwvks" path="res://Audio/SFX/zombie/zombie_foot_R.wav" id="7_jgnkq"]
[ext_resource type="Animation" uid="uid://bu5f0e5yvvoye" path="res://Models/Zombie/land.res" id="7_tmcj1"]
[ext_resource type="Script" uid="uid://bc4x8rwu73rom" path="res://Codebase/Audio/Scripts/unnamed_audio_set.gd" id="8_u174i"]
[ext_resource type="Script" uid="uid://bw6gem2hhn15b" path="res://Codebase/Zombie/track_player.gd" id="9_j0wq0"]

[sub_resource type="Resource" id="Resource_ofjqa"]
script = ExtResource("8_u174i")
files = Array[AudioStream]([ExtResource("6_jrf8t"), ExtResource("7_jgnkq")])
metadata/_custom_type_script = "uid://bc4x8rwu73rom"

[sub_resource type="SphereShape3D" id="SphereShape3D_aw8xw"]
radius = 0.007488447

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_5ia6i"]
radius = 0.0063476563
height = 0.024199218

[sub_resource type="Animation" id="Animation_xx3wb"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_j0wq0"]
_data = {
&"RESET": SubResource("Animation_xx3wb")
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_j0eft"]
_data = {
&"attack": ExtResource("3_j0wq0"),
&"death": ExtResource("4_hslf5"),
&"hurt": ExtResource("5_u2tw5"),
&"idle": ExtResource("6_fj6an"),
&"land": ExtResource("7_tmcj1"),
&"run": ExtResource("2_xx3wb")
}

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_xx3wb"]
radius = 0.16894531
height = 0.43084717

[sub_resource type="SphereShape3D" id="SphereShape3D_hslf5"]
radius = 0.30978557

[sub_resource type="SphereShape3D" id="SphereShape3D_u2tw5"]
radius = 0.84672964

[node name="Zombie" type="CharacterBody3D" node_paths=PackedStringArray("anim", "agent", "player_attack_range", "player_damage_range", "material_target")]
collision_layer = 4
script = ExtResource("1_j0wq0")
config_json_path = "res://Data/JSON/zombie_config.json"
anim = NodePath("characterMedium/AnimationPlayer")
agent = NodePath("NavigationAgent3D")
player_attack_range = NodePath("AttackDetectionArea")
player_damage_range = NodePath("AttackDamageArea")
materials = Array[Material]([ExtResource("2_fj6an"), ExtResource("3_tmcj1")])
material_target = NodePath("characterMedium/Root/Skeleton3D/characterMedium")
zombie_hit_sound = ExtResource("4_aw8xw")
zombie_die_sound = ExtResource("5_j0eft")
foot_step_sounds = SubResource("Resource_ofjqa")
spawnables = ExtResource("6_j0eft")

[node name="characterMedium" parent="." instance=ExtResource("1_5ia6i")]
transform = Transform3D(-0.15, 0, -1.3113417e-08, 0, 0.15, 0, 1.3113417e-08, 0, -0.15, 0, 0, 0)

[node name="Skeleton3D" parent="characterMedium/Root" index="0"]
bones/0/rotation = Quaternion(-0.5, -0.5, 0.5, 0.50000006)
bones/1/rotation = Quaternion(-0.5075123, 0.5082283, -0.49190623, -0.4921012)
bones/2/rotation = Quaternion(0.015735725, -0.0020784412, 0.9946248, -0.102321155)
bones/3/rotation = Quaternion(0.94612896, -0.02187107, 0.07550288, -0.31410348)
bones/7/rotation = Quaternion(0.7071068, -7.105428e-15, -0.7071068, 0)
bones/9/rotation = Quaternion(-0.5, -0.5, 0.5, 0.50000006)
bones/10/rotation = Quaternion(-0.5076861, 0.5079019, -0.49172804, -0.49243692)
bones/12/rotation = Quaternion(0.94811195, 0.011445179, -0.044092964, -0.31465632)
bones/16/rotation = Quaternion(0.7071068, -7.105428e-15, -0.7071068, 0)
bones/18/position = Vector3(0.00016415656, -0.00027737344, 0.013962721)
bones/18/rotation = Quaternion(0.10704975, 0.8068513, -0.5803747, -0.02639303)
bones/20/rotation = Quaternion(-0.01223436, 0.103938766, -0.050660804, 0.99321735)
bones/23/rotation = Quaternion(0.119263664, 0.056140877, -0.042423952, 0.990366)
bones/24/rotation = Quaternion(-0.18443175, -0.08011569, 0.030057628, 0.97911334)
bones/26/rotation = Quaternion(0.51833326, 0.36683825, 0.6501398, -0.4172274)
bones/27/rotation = Quaternion(-0.34916142, 0.908828, -0.13487731, 0.18419069)
bones/28/rotation = Quaternion(0.4939034, 0.010943987, 0.008195886, 0.8694093)
bones/29/rotation = Quaternion(-0.0036822262, 0.45721054, -0.049012072, 0.88799936)
bones/30/rotation = Quaternion(0.6685182, -0.07503359, -0.05090785, 0.7381476)
bones/31/rotation = Quaternion(0.494805, 0.058234747, -0.054320976, 0.86534745)
bones/32/rotation = Quaternion(0.44081008, -0.028696332, -0.02923534, 0.89666516)
bones/34/rotation = Quaternion(-0.10012532, 0.7834216, 0.27387652, 0.5488326)
bones/35/rotation = Quaternion(0.40664086, 0.02352126, 0.067682736, 0.91077393)
bones/37/rotation = Quaternion(0.7428937, -0.4878087, 0.21144621, 0.4067459)
bones/38/rotation = Quaternion(0.4122293, 0.745593, 0.33552745, -0.4019695)
bones/39/rotation = Quaternion(-0.060781665, -0.0032798406, 0.7239618, 0.6871494)
bones/40/rotation = Quaternion(0.1133783, 0.2572516, 0.31425828, 0.90675724)
bones/41/rotation = Quaternion(-0.6639688, -0.046883456, -0.04610888, 0.7448633)
bones/42/rotation = Quaternion(-0.49645925, 0.05823401, -0.036205452, 0.86534745)
bones/43/rotation = Quaternion(-0.43942928, -0.02636244, -0.046002425, 0.89671105)
bones/45/rotation = Quaternion(-0.16438235, 0.8729435, -0.28024235, -0.3638851)
bones/46/rotation = Quaternion(-0.38290152, -0.058393247, 0.19207406, 0.9017119)
bones/48/rotation = Quaternion(0.64107215, 0.14916414, 0.048631463, 0.7512733)
bones/48/scale = Vector3(1.000017, 1.0000007, 1.0000015)
bones/49/rotation = Quaternion(0.8112994, -0.042263556, 0.2459109, 0.5287107)
bones/50/rotation = Quaternion(-0.19328776, -0.19650608, -0.16961204, 0.9461802)
bones/50/scale = Vector3(0.9999994, 0.9999997, 1.0000007)
bones/53/rotation = Quaternion(0.99260646, -0.072334304, -0.09527543, -0.020561948)
bones/54/rotation = Quaternion(0.24932292, -0.013180369, -0.1226686, 0.9605295)
bones/55/rotation = Quaternion(-0.57484806, 0.122119874, 0.14954719, 0.79515547)
bones/56/rotation = Quaternion(0.028261183, 0.95394117, -0.29757354, -0.025446814)

[node name="HeadShotAttach" type="BoneAttachment3D" parent="characterMedium/Root/Skeleton3D" index="1"]
transform = Transform3D(0.9999277, -0.012863129, -0.0017218441, -0.005218625, -0.27693486, -0.96087474, 0.011883885, 0.9608028, -0.27697834, 7.618271e-05, -0.004828344, 0.02429522)
bone_name = "Head"
bone_idx = 24

[node name="HeadShotArea" type="StaticBody3D" parent="characterMedium/Root/Skeleton3D/HeadShotAttach" node_paths=PackedStringArray("z") groups=["HeadShotZone"]]
collision_layer = 8
script = ExtResource("3_hslf5")
z = NodePath("../../../../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="characterMedium/Root/Skeleton3D/HeadShotAttach/HeadShotArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.005, 0)
shape = SubResource("SphereShape3D_aw8xw")

[node name="ChestAttach" type="BoneAttachment3D" parent="characterMedium/Root/Skeleton3D" index="2"]
transform = Transform3D(0.99862224, -0.03607441, 0.03831563, 0.025144948, -0.3124776, -0.9495925, 0.046229303, 0.94924015, -0.3111372, 6.25529e-05, -0.0011101848, 0.016708352)
bone_name = "Chest"
bone_idx = 21

[node name="StaticBody3D" type="StaticBody3D" parent="characterMedium/Root/Skeleton3D/ChestAttach" node_paths=PackedStringArray("z") groups=["BodyShotZone"]]
collision_layer = 8
script = ExtResource("3_hslf5")
z = NodePath("../../../../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="characterMedium/Root/Skeleton3D/ChestAttach/StaticBody3D"]
transform = Transform3D(1.0000012, 2.0861626e-07, -2.0861626e-07, 1.1920929e-07, 0.99999905, 2.2351742e-07, 7.4505806e-07, 1.1920929e-07, 0.9999993, 4.2879255e-06, -0.0049312357, -1.6484875e-05)
shape = SubResource("CapsuleShape3D_5ia6i")

[node name="AnimationPlayer" parent="characterMedium" index="1"]
libraries = {
&"": SubResource("AnimationLibrary_j0wq0"),
&"anim": SubResource("AnimationLibrary_j0eft")
}

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.21438599, 0)
shape = SubResource("CapsuleShape3D_xx3wb")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
path_desired_distance = 0.1
target_desired_distance = 0.1
height = 0.66
radius = 3.85

[node name="AttackDetectionArea" type="Area3D" parent="."]
collision_layer = 4
collision_mask = 2
script = ExtResource("9_j0wq0")

[node name="CollisionShape3D" type="CollisionShape3D" parent="AttackDetectionArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.25254145, -0.32871714)
shape = SubResource("SphereShape3D_hslf5")

[node name="AttackDamageArea" type="Area3D" parent="."]
collision_layer = 4
collision_mask = 2
script = ExtResource("9_j0wq0")

[node name="CollisionShape3D" type="CollisionShape3D" parent="AttackDamageArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.253, -0.29035902)
shape = SubResource("SphereShape3D_u2tw5")

[node name="footsteps" type="AudioStreamPlayer3D" parent="."]

[node name="footsteps2" type="AudioStreamPlayer3D" parent="."]

[connection signal="body_entered" from="AttackDetectionArea" to="AttackDetectionArea" method="_on_body_entered"]
[connection signal="body_exited" from="AttackDetectionArea" to="AttackDetectionArea" method="_on_body_exited"]
[connection signal="body_entered" from="AttackDamageArea" to="AttackDamageArea" method="_on_body_entered"]
[connection signal="body_exited" from="AttackDamageArea" to="AttackDamageArea" method="_on_body_exited"]

[editable path="characterMedium"]
