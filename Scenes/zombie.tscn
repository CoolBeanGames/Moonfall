[gd_scene load_steps=25 format=3 uid="uid://dn41xgsutrc0u"]

[ext_resource type="PackedScene" uid="uid://2xeql213rw21" path="res://Models/Zombie/characterMedium.fbx" id="1_5ia6i"]
[ext_resource type="Script" uid="uid://cc6hl4kav2jau" path="res://Codebase/Zombie/zombie.gd" id="1_j0wq0"]
[ext_resource type="Material" uid="uid://caiybsnkovkg8" path="res://Models/Characters/Skins/zombie_male.tres" id="2_fj6an"]
[ext_resource type="Animation" uid="uid://bsy72jsmowaoh" path="res://Models/Zombie/run.res" id="2_xx3wb"]
[ext_resource type="Script" uid="uid://xgwgkqd85pbh" path="res://Codebase/Zombie/point_to_zombie.gd" id="3_hslf5"]
[ext_resource type="Animation" uid="uid://cmc6xgrhpp4bf" path="res://Models/Zombie/attack.res" id="3_j0wq0"]
[ext_resource type="Material" uid="uid://ct74tkuk0gvam" path="res://Models/Characters/Skins/zombie_female.tres" id="3_tmcj1"]
[ext_resource type="Animation" uid="uid://3aneyudo7y2o" path="res://Models/Zombie/death.res" id="4_hslf5"]
[ext_resource type="Resource" uid="uid://ph8hnnqgs1cn" path="res://Data/audio_sets/zombie_sounds.tres" id="4_j0eft"]
[ext_resource type="Resource" uid="uid://bvbt86702ikt4" path="res://Data/audio_sets/foot_step_sounds.tres" id="5_f3vja"]
[ext_resource type="Animation" uid="uid://hjloiso4om0u" path="res://Models/Zombie/hurt.res" id="5_u2tw5"]
[ext_resource type="Animation" uid="uid://cr5vv0yuqmmjl" path="res://Models/Zombie/idle.res" id="6_fj6an"]
[ext_resource type="Resource" uid="uid://c7k8rtahyr8h7" path="res://Data/items/item_spawns.tres" id="6_j0eft"]
[ext_resource type="Animation" uid="uid://bu5f0e5yvvoye" path="res://Models/Zombie/land.res" id="7_tmcj1"]
[ext_resource type="Script" uid="uid://bw6gem2hhn15b" path="res://Codebase/Zombie/track_player.gd" id="9_j0wq0"]
[ext_resource type="Script" uid="uid://dhrncig2073i4" path="res://Codebase/LOD_Setter.gd" id="11_jgnkq"]

[sub_resource type="SphereShape3D" id="SphereShape3D_aw8xw"]
radius = 0.007488447

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_5ia6i"]
radius = 0.0063476563
height = 0.024199218

[sub_resource type="Animation" id="Animation_xx3wb"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_j0wq0"]
_data = {
&"RESET": SubResource("Animation_xx3wb")
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_j0eft"]
_data = {
&"attack": ExtResource("3_j0wq0"),
&"death": ExtResource("4_hslf5"),
&"hurt": ExtResource("5_u2tw5"),
&"idle": ExtResource("6_fj6an"),
&"land": ExtResource("7_tmcj1"),
&"run": ExtResource("2_xx3wb")
}

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_xx3wb"]
radius = 0.16894531
height = 0.43084717

[sub_resource type="SphereShape3D" id="SphereShape3D_hslf5"]
radius = 0.30978557

[sub_resource type="SphereShape3D" id="SphereShape3D_u2tw5"]
radius = 0.84672964

[node name="Zombie" type="CharacterBody3D" node_paths=PackedStringArray("anim", "agent", "player_attack_range", "player_damage_range", "material_target")]
collision_layer = 4
script = ExtResource("1_j0wq0")
config_json_path = "res://Data/JSON/zombie_config.json"
anim = NodePath("characterMedium/AnimationPlayer")
agent = NodePath("NavigationAgent3D")
player_attack_range = NodePath("AttackDetectionArea")
player_damage_range = NodePath("AttackDamageArea")
materials = Array[Material]([ExtResource("2_fj6an"), ExtResource("3_tmcj1")])
material_target = NodePath("characterMedium/Root/Skeleton3D/characterMedium")
zombie_sounds = ExtResource("4_j0eft")
foot_steps = ExtResource("5_f3vja")
spawnables = ExtResource("6_j0eft")

[node name="characterMedium" parent="." instance=ExtResource("1_5ia6i")]
transform = Transform3D(-0.15, 0, -1.3113417e-08, 0, 0.15, 0, 1.3113417e-08, 0, -0.15, 0, 0, 0)

[node name="Skeleton3D" parent="characterMedium/Root" index="0"]
bones/0/rotation = Quaternion(-0.5, -0.5, 0.5, 0.50000006)
bones/1/rotation = Quaternion(-0.5075123, 0.5082283, -0.49190623, -0.4921012)
bones/2/rotation = Quaternion(0.015735725, -0.0020784412, 0.9946248, -0.102321155)
bones/3/rotation = Quaternion(0.94612896, -0.02187107, 0.07550288, -0.31410348)
bones/7/rotation = Quaternion(0.7071068, -7.105428e-15, -0.7071068, 0)
bones/9/rotation = Quaternion(-0.5, -0.5, 0.5, 0.50000006)
bones/10/rotation = Quaternion(-0.5076861, 0.5079019, -0.49172804, -0.49243692)
bones/12/rotation = Quaternion(0.94811195, 0.011445179, -0.044092964, -0.31465632)
bones/16/rotation = Quaternion(0.7071068, -7.105428e-15, -0.7071068, 0)
bones/18/position = Vector3(0.00016415656, -0.00027737344, 0.013962721)
bones/18/rotation = Quaternion(0.073641926, 0.8069082, -0.5785182, -0.093770005)
bones/20/rotation = Quaternion(-0.00798355, 0.0577597, 0.011696493, 0.99823016)
bones/23/rotation = Quaternion(0.09236875, 0.048679158, 0.0034041402, 0.9945285)
bones/24/rotation = Quaternion(-0.2196516, 0.021885118, -0.012301941, 0.97525537)
bones/26/rotation = Quaternion(0.55941004, 0.3225109, 0.6580864, -0.38725898)
bones/27/rotation = Quaternion(-0.29143104, 0.8824825, -0.22374204, 0.293653)
bones/28/rotation = Quaternion(0.32009545, 0.011924366, 0.0053116544, 0.94729537)
bones/29/rotation = Quaternion(0.0047793277, 0.51044255, 0.0058555063, 0.8598787)
bones/30/rotation = Quaternion(0.6685182, -0.07503359, -0.05090785, 0.7381476)
bones/31/rotation = Quaternion(0.494805, 0.058234747, -0.054320976, 0.86534745)
bones/32/rotation = Quaternion(0.44081008, -0.028696332, -0.02923534, 0.89666516)
bones/34/rotation = Quaternion(-0.10012532, 0.7834216, 0.27387652, 0.5488326)
bones/35/rotation = Quaternion(0.40664086, 0.02352126, 0.067682736, 0.91077393)
bones/37/rotation = Quaternion(0.8052889, -0.4149556, 0.25633734, 0.33706534)
bones/38/rotation = Quaternion(0.31672487, 0.80897814, 0.3515178, -0.34881943)
bones/39/rotation = Quaternion(-0.049136635, -0.0038630855, 0.58525956, 0.80934656)
bones/40/rotation = Quaternion(0.05918729, 0.20250434, 0.17462073, 0.96176744)
bones/41/rotation = Quaternion(-0.6639688, -0.046883456, -0.04610888, 0.7448633)
bones/42/rotation = Quaternion(-0.49645925, 0.05823401, -0.036205452, 0.86534745)
bones/43/rotation = Quaternion(-0.43942928, -0.02636244, -0.046002425, 0.89671105)
bones/45/rotation = Quaternion(-0.16438235, 0.8729435, -0.28024235, -0.3638851)
bones/46/rotation = Quaternion(-0.38290152, -0.058393247, 0.19207406, 0.9017119)
bones/48/rotation = Quaternion(0.71172005, 0.2369457, 0.014309812, 0.6611403)
bones/48/scale = Vector3(1.000017, 1.0000007, 1.0000015)
bones/49/rotation = Quaternion(0.8893319, -0.02425414, 0.2836702, 0.35781527)
bones/50/rotation = Quaternion(-0.071066864, -0.16042039, -0.16248852, 0.97098523)
bones/50/scale = Vector3(0.9999994, 0.9999997, 1.0000007)
bones/53/rotation = Quaternion(0.96593076, 0.011997592, -0.15283243, 0.20850943)
bones/54/rotation = Quaternion(0.38727894, -0.042981055, -0.18805556, 0.90155584)
bones/55/rotation = Quaternion(-0.6593531, 0.13741688, 0.23681794, 0.7002053)
bones/56/rotation = Quaternion(0.028261183, 0.95394117, -0.29757354, -0.025446814)

[node name="characterMedium" parent="characterMedium/Root/Skeleton3D" index="0"]
lod_bias = 0.05
script = ExtResource("11_jgnkq")

[node name="HeadShotAttach" type="BoneAttachment3D" parent="characterMedium/Root/Skeleton3D" index="1"]
transform = Transform3D(0.9993045, -0.03602657, 0.010831364, 0.0046377406, -0.16766897, -0.9858328, 0.037331454, 0.985185, -0.16738322, -0.00029024362, -0.0048484774, 0.024318775)
bone_name = "Head"
bone_idx = 24

[node name="HeadShotArea" type="StaticBody3D" parent="characterMedium/Root/Skeleton3D/HeadShotAttach" node_paths=PackedStringArray("z") groups=["HeadShotZone"]]
collision_layer = 8
script = ExtResource("3_hslf5")
z = NodePath("../../../../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="characterMedium/Root/Skeleton3D/HeadShotAttach/HeadShotArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.005, 0)
shape = SubResource("SphereShape3D_aw8xw")

[node name="ChestAttach" type="BoneAttachment3D" parent="characterMedium/Root/Skeleton3D" index="2"]
transform = Transform3D(0.99198157, -0.03059935, -0.12268908, -0.12596703, -0.32379314, -0.9377053, -0.0110332845, 0.9456331, -0.32504874, 8.923828e-05, -0.0011435798, 0.016698264)
bone_name = "Chest"
bone_idx = 21

[node name="StaticBody3D" type="StaticBody3D" parent="characterMedium/Root/Skeleton3D/ChestAttach" node_paths=PackedStringArray("z") groups=["BodyShotZone"]]
collision_layer = 8
script = ExtResource("3_hslf5")
z = NodePath("../../../../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="characterMedium/Root/Skeleton3D/ChestAttach/StaticBody3D"]
transform = Transform3D(1.0000012, 2.0861626e-07, -2.0861626e-07, 1.1920929e-07, 0.99999905, 2.2351742e-07, 7.4505806e-07, 1.1920929e-07, 0.9999993, 4.2879255e-06, -0.0049312357, -1.6484875e-05)
shape = SubResource("CapsuleShape3D_5ia6i")

[node name="AnimationPlayer" parent="characterMedium" index="1"]
libraries = {
&"": SubResource("AnimationLibrary_j0wq0"),
&"anim": SubResource("AnimationLibrary_j0eft")
}

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.21438599, 0)
shape = SubResource("CapsuleShape3D_xx3wb")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
path_desired_distance = 0.1
target_desired_distance = 0.1
height = 0.66
radius = 3.85

[node name="AttackDetectionArea" type="Area3D" parent="."]
collision_layer = 4
collision_mask = 2
script = ExtResource("9_j0wq0")

[node name="CollisionShape3D" type="CollisionShape3D" parent="AttackDetectionArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.25254145, -0.32871714)
shape = SubResource("SphereShape3D_hslf5")

[node name="AttackDamageArea" type="Area3D" parent="."]
collision_layer = 4
collision_mask = 2
script = ExtResource("9_j0wq0")

[node name="CollisionShape3D" type="CollisionShape3D" parent="AttackDamageArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.253, -0.29035902)
shape = SubResource("SphereShape3D_u2tw5")

[node name="footsteps" type="AudioStreamPlayer3D" parent="."]

[node name="footsteps2" type="AudioStreamPlayer3D" parent="."]

[connection signal="body_entered" from="AttackDetectionArea" to="AttackDetectionArea" method="_on_body_entered"]
[connection signal="body_exited" from="AttackDetectionArea" to="AttackDetectionArea" method="_on_body_exited"]
[connection signal="body_entered" from="AttackDamageArea" to="AttackDamageArea" method="_on_body_entered"]
[connection signal="body_exited" from="AttackDamageArea" to="AttackDamageArea" method="_on_body_exited"]

[editable path="characterMedium"]
